# =============================================================================
# âš™ï¸ í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì • ë§µ (Vue.js)
# =============================================================================
# ğŸ“ ì„¤ëª…: Vue.js í”„ë¡ íŠ¸ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í™˜ê²½ ì„¤ì • ê´€ë¦¬
# ğŸ¯ ëª©ì : ì½”ë“œì™€ ì„¤ì • ë¶„ë¦¬ (12-Factor App ì›ì¹™), í™˜ê²½ë³„ ì„¤ì • ê´€ë¦¬ ìš©ì´
# ğŸ”’ ë³´ì•ˆ: ë¯¼ê° ì •ë³´ëŠ” ë°˜ë“œì‹œ Secretsì— ì €ì¥ (ì—¬ê¸°ëŠ” ê³µê°œ ì„¤ì •ë§Œ)
# ğŸŒŸ ì‹¤ë¬´ íŒ: ConfigMap ë³€ê²½ ì‹œ Pod ì¬ì‹œì‘ í•„ìš” (auto-reload ì§€ì› ì•ˆë¨)
# ğŸ”„ ì‹¤í–‰ ìˆœì„œ: #2-1 (ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„± í›„ ì‹¤í–‰)
# ğŸ“– ì°¸ê³ : https://12factor.net/config
# =============================================================================

apiVersion: v1                      # ì¿ ë²„ë„¤í‹°ìŠ¤ API ë²„ì „
kind: ConfigMap                     # ì„¤ì • ì •ë³´ ì €ì¥ìš© ê°ì²´

metadata:
  name: frontend-config             # ConfigMap ì´ë¦„ (ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ê³ ìœ )
  namespace: web3-community        # ì†Œì† ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  
  labels:
    app: web3-community
    component: frontend
    config-type: environment
    tier: presentation
  
  annotations:
    description: "Frontend configuration for Vue.js application"
    config-version: "v1.0"

data:
  # =============================================================================
  # ğŸŒ ê¸°ë³¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
  # =============================================================================
  # Vue.js í™˜ê²½ ë³€ìˆ˜ë“¤ (build ì‹œ ì£¼ì…)
  VUE_APP_TITLE: "Web3 Community Platform"
  VUE_APP_VERSION: "1.0.0"
  VUE_APP_DESCRIPTION: "Decentralized community platform"
  
  # =============================================================================
  # ğŸŒ API ì„œë²„ ì—°ê²° ì„¤ì •
  # =============================================================================
  # ê°œë°œ í™˜ê²½ API ì£¼ì†Œ
  VUE_APP_API_BASE_URL: "http://localhost:8080"
  VUE_APP_API_TIMEOUT: "30000"    # 30ì´ˆ
  
  # WebSocket ì£¼ì†Œ (ì‹¤ì‹œê°„ ê¸°ëŠ¥ìš©)
  VUE_APP_WS_URL: "ws://localhost:8080/ws"
  
  # =============================================================================
  # ğŸ¨ UI/UX ì„¤ì •
  # =============================================================================
  # í…Œë§ˆ ì„¤ì •
  VUE_APP_DEFAULT_THEME: "light"
  VUE_APP_THEME_OPTIONS: "light,dark"
  
  # ì–¸ì–´ ì„¤ì •
  VUE_APP_DEFAULT_LOCALE: "ko"
  VUE_APP_SUPPORTED_LOCALES: "ko,en,zh"
  
  # =============================================================================
  # ğŸ“± ë°˜ì‘í˜• ë””ìì¸ ì„¤ì •
  # =============================================================================
  VUE_APP_MOBILE_BREAKPOINT: "768"
  VUE_APP_TABLET_BREAKPOINT: "1024"
  
  # =============================================================================
  # ğŸ“Š ì„±ëŠ¥ ë° ìµœì í™” ì„¤ì •
  # =============================================================================
  # ë ˆì´ì§€ ë¡œë”© ì„¤ì •
  VUE_APP_LAZY_LOADING_ENABLED: "true"
  VUE_APP_CHUNK_SIZE_LIMIT: "244"
  
  # ìºì‹œ ì„¤ì •
  VUE_APP_CACHE_TTL: "3600"        # 1ì‹œê°„ (ì´ˆ)
  
  # =============================================================================
  # ğŸ”” ì•Œë¦¼ ì„¤ì •
  # =============================================================================
  VUE_APP_NOTIFICATION_ENABLED: "true"
  VUE_APP_NOTIFICATION_SOUND: "true"
  VUE_APP_NOTIFICATION_DURATION: "5000"  # 5ì´ˆ
  
  # =============================================================================
  # ğŸ“ˆ ë¶„ì„ ë° ëª¨ë‹ˆí„°ë§ ì„¤ì •
  # =============================================================================
  VUE_APP_ANALYTICS_ENABLED: "false"   # ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë¹„í™œì„±í™”
  VUE_APP_SENTRY_DSN: ""               # ìš´ì˜ í™˜ê²½ì—ì„œë§Œ ì„¤ì •
  
  # =============================================================================
  # ğŸ›¡ï¸ ë³´ì•ˆ ì„¤ì •
  # =============================================================================
  VUE_APP_CORS_ENABLED: "true"
  VUE_APP_XSS_PROTECTION: "true"
  
  # =============================================================================
  # ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •
  # =============================================================================
  VUE_APP_DEV_TOOLS_ENABLED: "true"
  VUE_APP_HOT_RELOAD: "true"
  VUE_APP_SOURCE_MAP: "true"
  
  # =============================================================================
  # ğŸ“„ Nginx ì„¤ì • (ì›¹ì„œë²„ìš©)
  # =============================================================================
  nginx.conf: |
    server {
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;
        
        # Gzip ì••ì¶• ì„¤ì •
        gzip on;
        gzip_vary on;
        gzip_min_length 1024;
        gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
        
        # Vue.js SPA ë¼ìš°íŒ… ì§€ì›
        location / {
            try_files $uri $uri/ /index.html;
        }
        
        # API í”„ë¡ì‹œ ì„¤ì • (ê°œë°œ í™˜ê²½ìš©)
        location /api/ {
            proxy_pass http://api-gateway-service:8080/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
        
        # WebSocket í”„ë¡ì‹œ ì„¤ì •
        location /ws/ {
            proxy_pass http://api-gateway-service:8080/ws/;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
        
        # ì •ì  íŒŒì¼ ìºì‹œ ì„¤ì •
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
        
        # ë³´ì•ˆ í—¤ë” ì„¤ì •
        add_header X-Frame-Options "SAMEORIGIN" always;
        add_header X-Content-Type-Options "nosniff" always;
        add_header X-XSS-Protection "1; mode=block" always;
        add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    }

# =============================================================================
# ğŸ” ì„¤ëª… ë° ì‚¬ìš©ë²•
# =============================================================================
# 
# ConfigMap ì‚¬ìš© ë°©ë²•:
# 1. Volume Mount: ì„¤ì • íŒŒì¼ì„ íŒŒì¼ ì‹œìŠ¤í…œì— ë§ˆìš´íŠ¸
# 2. Environment Variables: ì„¤ì •ì„ í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…
# 3. Command Arguments: ì„¤ì •ì„ ëª…ë ¹ì–´ ì¸ìë¡œ ì „ë‹¬
#
# í™˜ê²½ ë³€ìˆ˜ë¡œ ì‚¬ìš© ì‹œ (ì˜ˆì‹œ):
# envFrom:
#   - configMapRef:
#       name: frontend-config
#
# Volumeìœ¼ë¡œ ë§ˆìš´íŠ¸ ì‹œ (ì˜ˆì‹œ):
# volumeMounts:
#   - name: config-volume
#     mountPath: /etc/nginx/conf.d/
# volumes:
#   - name: config-volume
#     configMap:
#       name: frontend-config
#
# ì‹¤ë¬´ íŒ:
# - ConfigMap ë³€ê²½ ì‹œ í•´ë‹¹ Podë“¤ì„ ì¬ì‹œì‘í•´ì•¼ ë°˜ì˜ë¨
# - ëŒ€ìš©ëŸ‰ ì„¤ì •ì€ ì—¬ëŸ¬ ConfigMapìœ¼ë¡œ ë¶„ë¦¬ ê´€ë¦¬
# - ë²„ì „ ê´€ë¦¬ë¥¼ ìœ„í•´ config-version ì–´ë…¸í…Œì´ì…˜ í™œìš©
# - ë¯¼ê° ì •ë³´(ë¹„ë°€ë²ˆí˜¸, í† í° ë“±)ëŠ” ë°˜ë“œì‹œ Secret ì‚¬ìš©
# =============================================================================