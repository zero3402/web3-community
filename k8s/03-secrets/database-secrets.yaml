# =============================================================================
# ğŸ”’ ë°ì´í„°ë² ì´ìŠ¤ ë¯¼ê° ì •ë³´ ì‹œí¬ë¦¿
# =============================================================================
# ğŸ“ ì„¤ëª…: ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸, ì¸ì¦ ì •ë³´ ë“± ë¯¼ê° ì •ë³´ ì €ì¥
# ğŸ¯ ëª©ì : ì½”ë“œì™€ ë³´ì•ˆ ì •ë³´ ë¶„ë¦¬, ì•”í˜¸í™” ì €ì¥, ì ‘ê·¼ ì œì–´
# âš ï¸  ì£¼ì˜ì‚¬í•­: Git ì»¤ë°‹ ì ˆëŒ€ ê¸ˆì§€! .gitignoreì— ì¶”ê°€ í•„ìˆ˜
# ğŸŒŸ ì‹¤ë¬´ íŒ: ìš´ì˜ í™˜ê²½ì€ Vault, AWS Secrets Manager ì‚¬ìš© ê¶Œì¥
# ğŸ”„ ì‹¤í–‰ ìˆœì„œ: #3-1 (ë„¤ì„ìŠ¤í˜ì´ìŠ¤, ConfigMap ìƒì„± í›„ ì‹¤í–‰)
# ğŸ”„ ì£¼ê¸°: ë³´ì•ˆì„ ìœ„í•´ 90ì¼ë§ˆë‹¤ í‚¤ ë¡œí…Œì´ì…˜ ê¶Œì¥
# ğŸ“– ì°¸ê³ : https://kubernetes.io/docs/concepts/configuration/secret/
# =============================================================================

apiVersion: v1                      # ì¿ ë²„ë„¤íŒ¨ë„ API ë²„ì „
kind: Secret                         # ë¯¼ê°ì •ë³´ ì €ì¥ìš© ê°ì²´

metadata:
  name: database-secrets            # Secret ì´ë¦„ (ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ ê³ ìœ )
  namespace: web3-community        # ì†Œì† ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  
  labels:
    app: web3-community
    component: database
    secret-type: database-credentials
    tier: data
    environment: local
  
  annotations:
    description: "Database credentials for web3-community platform"
    created-by: "developer"
    rotation-policy: "90-days"
    last-rotated: "2024-02-03"
    next-rotation: "2024-05-03"

type: Opaque                         # ì•”í˜¸í™”ë˜ì§€ ì•Šì€ ì„ì˜ ë°ì´í„°

# âš ï¸ ì¤‘ìš”: ëª¨ë“  ê°’ë“¤ì€ base64ë¡œ ì¸ì½”ë”©ë˜ì–´ì•¼ í•¨
# ì¸ì½”ë”© ë°©ë²•: echo -n 'your-secret' | base64
# ë””ì½”ë”© ë°©ë²•: echo 'encoded-value' | base64 -d

data:
  # =============================================================================
  # ğŸ¬ MySQL ì¸ì¦ ì •ë³´
  # =============================================================================
  # MySQL root ë¹„ë°€ë²ˆí˜¸
  mysql-root-password: "bXlzZWNyZXRwYXNz"  # base64: 'mysecretpass'
  
  # MySQL ì¼ë°˜ ì‚¬ìš©ì ì •ë³´
  mysql-username: "d2ViM3VzZXI="             # base64: 'web3user'
  mysql-password: "dXNlcnBhc3N3b3Jk"        # base64: 'userpassword'
  
  # MySQL ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ìš©ì (ì„œë¹„ìŠ¤ë³„)
  mysql-api-gateway-user: "YXBpZ2F0ZXdheS11c2Vy"     # base64: 'apigateway-user'
  mysql-api-gateway-password: "YXBpZ2F0ZXdheS1wYXNz"   # base64: 'apigateway-pass'
  
  mysql-user-service-user: "dXNlcnNlcnZpY2UtdXNlcg=="      # base64: 'userservice-user'
  mysql-user-service-password: "dXNlcnNlcnZpY2UtcGFzcw=="  # base64: 'userservice-pass'

  # =============================================================================
  # ğŸƒ MongoDB ì¸ì¦ ì •ë³´
  # =============================================================================
  # MongoDB ê´€ë¦¬ì ê³„ì •
  mongodb-root-username: "YWRtaW4="               # base64: 'admin'
  mongodb-root-password: "YWRtaW5wYXNx"           # base64: 'adminpasx'
  
  # MongoDB ì• í”Œë¦¬ì¼€ì´ì…˜ ê³„ì •
  mongodb-username: "bW9uZ291c2Vy"               # base64: 'mongouser'
  mongodb-password: "bW9uZ29wYXN"                # base64: 'mongopass'
  
  # MongoDB ë³µì œì…‹ í‚¤ (265-255 bytes)
  mongodb-replica-key: "bXlyZXBsaWNhZ2V5MTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTA="  # base64: 'myreplicakey12345678901234567890123456789012345678901234567890'

  # =============================================================================
  # ğŸ”´ Redis ì¸ì¦ ì •ë³´
  # =============================================================================
  # Redis ë¹„ë°€ë²ˆí˜¸
  redis-password: "cmVkaXNwYXNz"                # base64: 'redispass'
  
  # Redis í´ëŸ¬ìŠ¤í„° ë¹„ë°€ë²ˆí˜¸ (í´ëŸ¬ìŠ¤í„° ëª¨ë“œìš©)
  redis-cluster-password: "cmVkaXNjbHVzdGVycGFzcw=="  # base64: 'redisclusterpass'

  # =============================================================================
  # ğŸ“¡ Kafka ì¸ì¦ ì •ë³´
  # =============================================================================
  # Kafka Zookeeper ë¹„ë°€ë²ˆí˜¸
  zookeeper-password: "em9va2VlcGVycGFzcw=="        # base64: 'zookeeperpass'
  
  # Kafka í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ ì •ë³´
  kafka-client-user: "a2Fma2FjbGllbnQ="               # base64: 'kafkaclient'
  kafka-client-password: "a2Fma2FjbGllbnRwYXNz"       # base64: 'kafkaclientpass'
  
  # Kafka ë¸Œë¡œì»¤ ê°„ í†µì‹  ë¹„ë°€ë²ˆí˜¸
  kafka-broker-inter-password: "a2Fma2Ficm9rZXI="      # base64: 'kafkabroker'
  
  # Kafka SCRAM ì¸ì¦ ì •ë³´
  kafka-scram-user: "a2Fma2FzY3JhbQ=="                # base64: 'kafkascram'
  kafka-scram-password: "a2Fma2FzY3JYWXBhc3M="        # base64: 'kafkascrapass'

  # =============================================================================
  # ğŸ” ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ì¦ ì •ë³´
  # =============================================================================
  # JWT í† í° ì‹œí¬ë¦¿ í‚¤ (ìµœì†Œ 256 bits)
  jwt-secret: "bXlzZWNyZXRqd2RrZXkxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OTA="  # base64: 'mysecretjwdkey123456789012345678901234567890'
  
  # JWT ë¦¬í”„ë ˆì‹œ í† í° ì‹œí¬ë¦¿
  jwt-refresh-secret: "bXlyZWZyZXNoa2V5MTIzNDU2Nzg5MDEyMzQ1Njc4OTA="             # base64: 'myrefreshkey12345678901234567890'
  
  # API ì•”í˜¸í™” í‚¤
  encryption-key: "ZW5jcnlwdGlvbmtleTEyMzQ1Njc4OTAxMjM0NTY3ODkw"              # base64: 'encryptionkey12345678901234567890'
  
  # OAuth2 í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿
  oauth2-client-secret: "b2F1dGgyY2xpZW50c2VjcmV0MTIz"                       # base64: 'oauth2clientsecret123'

  # =============================================================================
# ğŸ” ì„¤ëª… ë° ì‚¬ìš©ë²•
# =============================================================================
# 
# Secret ì‚¬ìš© ë°©ë²•:
# 1. í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…:
#    env:
#      - name: MYSQL_ROOT_PASSWORD
#        valueFrom:
#          secretKeyRef:
#            name: database-secrets
#            key: mysql-root-password
#
# 2. Volumeìœ¼ë¡œ ë§ˆìš´íŠ¸:
#    volumeMounts:
#      - name: db-secrets
#        mountPath: /etc/secrets
#        readOnly: true
#    volumes:
#      - name: db-secrets
#        secret:
#          secretName: database-secrets
#
# 3. ëª¨ë“  í‚¤ë¥¼ í™˜ê²½ ë³€ìˆ˜ë¡œ ì£¼ì…:
#    envFrom:
#      - secretRef:
#          name: database-secrets
#
# ë³´ì•ˆ ì£¼ì˜ì‚¬í•­:
# 1. ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ ê²ƒ! (.gitignoreì— ì¶”ê°€)
# 2. kubectl get secrets ì‹œ ê°’ì´ ë³´ì´ì§€ë§Œ ì ˆëŒ€ ê³µìœ  ê¸ˆì§€
# 3. ìš´ì˜ í™˜ê²½ì€ ì™¸ë¶€ ì‹œí¬ë¦¿ ê´€ë¦¬ ì‹œìŠ¤í…œ ì‚¬ìš© ê¶Œì¥
# 4. ì£¼ê¸°ì ì¸ í‚¤ ë¡œí…Œì´ì…˜ (ë³´ì•ˆ ì •ì±…)
#
# ì‹¤ë¬´ íŒ:
# - Secret ë²„ì „ ê´€ë¦¬ (v1, v2 ë“±)ìœ¼ë¡œ ë¡¤ë°± ìš©ì´
# - í™˜ê²½ë³„ Secret ë¶„ë¦¬ (dev, staging, prod)
# - ì ‘ê·¼ ê¶Œí•œ ìµœì†Œí™” (RBAC ì„¤ì •)
# - ì•”í˜¸í™”ëœ ìƒíƒœë¡œ ì €ì¥ ë° ì „ì†¡
#
# í‚¤ ë¡œí…Œì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì˜ˆì‹œ:
# ```bash
# #!/bin/bash
# # ìƒˆ ë¹„ë°€ë²ˆí˜¸ ìƒì„±
# NEW_PASSWORD=$(openssl rand -base64 32)
# 
# # Secret ì—…ë°ì´íŠ¸
# kubectl patch secret database-secrets \
#   -p '{"data":{"mysql-password":"'$(echo -n $NEW_PASSWORD | base64)'"}}'
# 
# # Pod ì¬ì‹œì‘ìœ¼ë¡œ ë³€ê²½ ë‚´ìš© ë°˜ì˜
# kubectl rollout restart deployment/mysql -n web3-community
# ```
# =============================================================================