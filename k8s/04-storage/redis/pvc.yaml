# =============================================================================
# ğŸ’¾ Redis PersistentVolumeClaim
# =============================================================================
# ğŸ“ ì„¤ëª…: Redis ë°ì´í„° ì˜ì†ì„±ì„ ìœ„í•œ ë³¼ë¥¨ ìš”ì²­ ì •ì˜
# ğŸ¯ ëª©ì : ì„¸ì…˜/ìºì‹œ ë°ì´í„°ê°€ Pod ì¬ì‹œì‘/ì´ë™ ì‹œì—ë„ ìœ ì§€ë˜ë„ë¡ ë³´ì¥
# ğŸŒŸ ì‹¤ë¬´ íŒ: RedisëŠ” ì¸ë©”ëª¨ë¦¬ DBì´ë¯€ë¡œ ë¹ ë¥¸ SSD ìŠ¤í† ë¦¬ì§€ ì‚¬ìš© ê¶Œì¥
# ğŸ”„ ì‹¤í–‰ ìˆœì„œ: #4-3-1 (Redis ë°°í¬ ì „ ì‹¤í–‰)
# ğŸ“– ì°¸ê³ : https://kubernetes.io/docs/concepts/storage/persistent-volumes/
# =============================================================================

apiVersion: v1
kind: PersistentVolumeClaim

metadata:
  name: redis-pvc                 # PVC ì´ë¦„
  namespace: web3-community     # ì†Œì† ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  
  labels:
    app: web3-community
    component: database
    database: redis
    tier: data
    environment: local
  
  annotations:
    description: "Persistent storage for Redis cache and session data"
    storage-class: "standard"
    created-by: "developer"

spec:
  accessModes:
    - ReadWriteOnce
  
  storageClassName: "standard"
  
  resources:
    requests:
      storage: 2Gi               # 2GB ìŠ¤í† ë¦¬ì§€ (ìºì‹œìš©ìœ¼ë¡œ ì ì€ ìš©ëŸ‰)
      # ìš´ì˜ í™˜ê²½: 5-10Gi ê¶Œì¥

# =============================================================================
# ğŸŒŸ Redis íŠ¹í™” íŒ
# =============================================================================
# 
# ì„±ëŠ¥ ìµœì í™”:
# - NVMe SSD ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©
# - ë†’ì€ IOPS í”„ë¡œë¹„ì €ë‹ (5000+)
# - ë‚®ì€ ë ˆì´í„´ì‹œ (sub-millisecond)
# - ë””ìŠ¤í¬ ìºì‹œ ì •ì±… ìµœì í™”
#
# ëª¨ë‹ˆí„°ë§ ì§€í‘œ:
# - ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
# - ë””ìŠ¤í¬ I/O ì§€ì—°
# - í‚¤ ìˆ˜ ë° ë°ì´í„° í¬ê¸°
# - ìºì‹œ íˆíŠ¸ìœ¨
#
# ìš´ì˜ ê³ ë ¤ì‚¬í•­:
# - Redis Cluster êµ¬ì„± ì‹œ ê° ë…¸ë“œë³„ PVC
# - ë°±ì—…/ë³µì› ì „ëµ (RDB/AOF)
# - íŒŒí‹°ì…”ë‹ ì „ëµ (í´ëŸ¬ìŠ¤í„° ëª¨ë“œ)
# - ë©”ëª¨ë¦¬ ìµœì í™” ì„¤ì •
# =============================================================================