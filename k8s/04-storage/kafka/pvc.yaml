# =============================================================================
# ğŸ’¾ Kafka PersistentVolumeClaim
# =============================================================================
# ğŸ“ ì„¤ëª…: Kafka ë©”ì‹œì§• ë°ì´í„° ì˜ì†ì„±ì„ ìœ„í•œ ë³¼ë¥¨ ìš”ì²­ ì •ì˜
# ğŸ¯ ëª©ì : ë¡œê·¸ ë°ì´í„°ê°€ Pod ì¬ì‹œì‘/ì´ë™ ì‹œì—ë„ ìœ ì§€ë˜ë„ë¡ ë³´ì¥
# ğŸŒŸ ì‹¤ë¬´ íŒ: KafkaëŠ” ìˆœì°¨ I/Oê°€ ë§ìœ¼ë¯€ë¡œ SSD ìŠ¤í† ë¦¬ì§€ í•„ìˆ˜
# ğŸ”„ ì‹¤í–‰ ìˆœì„œ: #4-4-1 (Kafka ë°°í¬ ì „ ì‹¤í–‰)
# ğŸ“– ì°¸ê³ : https://kubernetes.io/docs/concepts/storage/persistent-volumes/
# =============================================================================

apiVersion: v1
kind: PersistentVolumeClaim

metadata:
  name: kafka-pvc                 # PVC ì´ë¦„
  namespace: web3-community     # ì†Œì† ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  
  labels:
    app: web3-community
    component: database
    database: kafka
    tier: data
    environment: local
  
  annotations:
    description: "Persistent storage for Kafka messaging logs"
    storage-class: "standard"
    created-by: "developer"

spec:
  accessModes:
    - ReadWriteOnce
  
  storageClassName: "standard"
  
  resources:
    requests:
      storage: 20Gi              # 20GB ìŠ¤í† ë¦¬ì§€ (ë©”ì‹œì§€ ë¡œê·¸ìš©)
      # ìš´ì˜ í™˜ê²½: 100GB-1TB ê¶Œì¥

---

# =============================================================================
# ğŸ’¾ Zookeeper PersistentVolumeClaim
# =============================================================================
# ğŸ“ ì„¤ëª…: Zookeeper ë©”íƒ€ë°ì´í„° ì˜ì†ì„±ì„ ìœ„í•œ ë³¼ë¥¨ ìš”ì²­ ì •ì˜
# ğŸ¯ ëª©ì : Kafka í´ëŸ¬ìŠ¤í„° ë©”íƒ€ë°ì´í„° ì˜ì†ì„± ë³´ì¥
# ğŸŒŸ ì‹¤ë¬´ íŒ: ZookeeperëŠ” ë°ì´í„°ì–‘ì´ ì ì§€ë§Œ ë¹ ë¥¸ ì‘ë‹µ í•„ìš”
# ğŸ”„ ì‹¤í–‰ ìˆœì„œ: #4-4-2 (Kafka ë°°í¬ ì „ ì‹¤í–‰)
# =============================================================================

apiVersion: v1
kind: PersistentVolumeClaim

metadata:
  name: zookeeper-pvc            # PVC ì´ë¦„
  namespace: web3-community     # ì†Œì† ë„¤ì„ìŠ¤í˜ì´ìŠ¤
  
  labels:
    app: web3-community
    component: database
    database: zookeeper
    tier: data
    environment: local
  
  annotations:
    description: "Persistent storage for Zookeeper metadata"
    storage-class: "standard"
    created-by: "developer"

spec:
  accessModes:
    - ReadWriteOnce
  
  storageClassName: "standard"
  
  resources:
    requests:
      storage: 2Gi               # 2GB ìŠ¤í† ë¦¬ì§€ (ë©”íƒ€ë°ì´í„°ìš©ìœ¼ë¡œ ì ì€ ìš©ëŸ‰)

# =============================================================================
# ğŸŒŸ Kafka/Zookeeper ìŠ¤í† ë¦¬ì§€ íŒ
# =============================================================================
# 
# Kafka ì„±ëŠ¥ ìµœì í™”:
# - ë†’ì€ IOPS SSD ìŠ¤í† ë¦¬ì§€ (5000-10000 IOPS)
# - ë‚®ì€ ë ˆì´í„´ì‹œ (sub-millisecond)
# - ëŒ€ìš©ëŸ‰ ë²„í¼ë§ ì§€ì› ìŠ¤í† ë¦¬ì§€
# - ìˆœì°¨ ì“°ê¸° ìµœì í™”
#
# Zookeeper ê³ ë ¤ì‚¬í•­:
# - ë¹ ë¥¸ ì‘ë‹µ ì†ë„ (latency critical)
# - ì‘ì§€ë§Œ ë¹ˆë²ˆí•œ I/O íŒ¨í„´
# - 3-5ê°œ ë…¸ë“œì˜ í™€ìˆ˜ êµ¬ì„±
# - ë³„ë„ ìŠ¤í† ë¦¬ì§€ ë¶„ë¦¬
#
# ìš´ì˜ ì „ëµ:
# - ë¡œê·¸ ë³´ê´€ ì •ì±… (retention policy)
# - ë””ìŠ¤í¬ ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼
# - íŒŒí‹°ì…˜ ë¦¬ë°¸ëŸ°ì‹± ì „ëµ
# - ë°±ì—… ë° ì¬í•´ ë³µêµ¬ ê³„íš
# =============================================================================