# ğŸ—ï¸ ì•„í‚¤í…ì²˜ ì„¤ëª…

Web3 Community Platformì€ MSA(Microservices Architecture) ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ê° ì„œë¹„ìŠ¤ëŠ” ë…ë¦½ì ìœ¼ë¡œ ê°œë°œ, ë°°í¬, í™•ì¥ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ¯ ì•„í‚¤í…ì²˜ ëª©í‘œ

- **ë…ë¦½ì„±**: ê° ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ ìš´ì˜
- **í™•ì¥ì„±**: íŠ¸ë˜í”½ì— ë”°ë¥¸ ìœ ì—°í•œ í™•ì¥
- **ì•ˆì •ì„±**: ì¥ì•  ê²©ë¦¬ ë° ê³ ê°€ìš©ì„±
- **ê°œë°œ ìƒì‚°ì„±**: ë¹ ë¥¸ ê°œë°œ ë° ë°°í¬

## ğŸ—ï¸ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸŒ Ingress Layer                      â”‚
â”‚                  (nginx-ingress)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ğŸš€ API Gateway Layer                    â”‚
â”‚            (Spring Cloud Gateway)                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚         â”‚   Auth      â”‚   Rate      â”‚   Routing    â”‚    â”‚
â”‚         â”‚   Filter    â”‚   Limiting  â”‚   Rules      â”‚    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ¯ Service Layer                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ‘¤ Users    â”‚ ğŸ“ Posts    â”‚ ğŸ’¬ Comments â”‚ ğŸ”” Notificationsâ”‚
â”‚             â”‚             â”‚             â”‚               â”‚
â”‚Spring Boot  â”‚Spring Boot  â”‚Spring Boot  â”‚Spring Boot     â”‚
â”‚+ WebFlux    â”‚+ WebFlux    â”‚+ WebFlux    â”‚+ WebFlux      â”‚
â”‚+ Kotlin     â”‚+ Kotlin     â”‚+ Kotlin     â”‚+ Kotlin       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸ’¾ Data Layer                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¬ MySQL    â”‚ ğŸƒ MongoDB  â”‚ ğŸ”´ Redis   â”‚ ğŸ“¡ Kafka      â”‚
â”‚             â”‚             â”‚             â”‚               â”‚
â”‚Users, Roles â”‚Posts, Files â”‚Sessions,   â”‚Events,        â”‚
â”‚Permissions  â”‚Attachments  â”‚Cache        â”‚Notifications  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### Vue.js 3 ê¸°ë°˜ SPA
- **Framework**: Vue 3 + Composition API
- **ìƒíƒœ ê´€ë¦¬**: Pinia (Vuex successor)
- **ë¼ìš°íŒ…**: Vue Router 4
- **UI Framework**: Element Plus / Vuetify 3
- **ë¹Œë“œ ë„êµ¬**: Vite
- **CSS**: Tailwind CSS / SCSS

### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°
```
src/
â”œâ”€â”€ components/           # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ common/          # ê³µí†µ ì»´í¬ë„ŒíŠ¸ (Header, Footer, etc.)
â”‚   â”œâ”€â”€ forms/           # í¼ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ ui/              # UI ì»´í¬ë„ŒíŠ¸ (Button, Modal, etc.)
â”œâ”€â”€ views/               # í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ Home/
â”‚   â”œâ”€â”€ Posts/
â”‚   â”œâ”€â”€ Profile/
â”‚   â””â”€â”€ Auth/
â”œâ”€â”€ store/               # Pinia stores
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ posts.js
â”‚   â””â”€â”€ notifications.js
â”œâ”€â”€ services/            # API í˜¸ì¶œ
â”‚   â”œâ”€â”€ api.js
â”‚   â”œâ”€â”€ auth.js
â”‚   â””â”€â”€ posts.js
â”œâ”€â”€ utils/               # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â””â”€â”€ assets/              # ì •ì  íŒŒì¼
```

## ğŸš€ ë°±ì—”ë“œ ì•„í‚¤í…ì²˜

### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ìƒì„¸

#### 1. API Gateway (Spring Cloud Gateway)
- **ì—­í• **: ë¼ìš°íŒ…, ì¸ì¦, ë¡œë“œë°¸ëŸ°ì‹±
- **íŠ¹ì§•**:
  - Path-based routing (`/api/users/*`, `/api/posts/*`)
  - JWT í† í° ê²€ì¦
  - Rate Limiting
  - Circuit Breaker
  - Request/Response Logging

```yaml
routes:
  - id: user-service
    uri: lb://user-service
    path: /api/users/**
    filters:
      - TokenRelay=
      - RateLimit=100,1m
```

#### 2. User Service
- **ê¸°ìˆ **: Spring Boot + WebFlux + Kotlin + MySQL
- **ê¸°ëŠ¥**:
  - ì‚¬ìš©ì CRUD
  - ì¸ì¦/ì¸ê°€
  - í”„ë¡œí•„ ê´€ë¦¬
  - ê¶Œí•œ ê´€ë¦¬

#### 3. Post Service
- **ê¸°ìˆ **: Spring Boot + WebFlux + Kotlin + MongoDB
- **ê¸°ëŠ¥**:
  - ê²Œì‹œê¸€ CRUD
  - íŒŒì¼ ì—…ë¡œë“œ
  - ê²€ìƒ‰ ê¸°ëŠ¥
  - íƒœê·¸ ê´€ë¦¬

#### 4. Comment Service
- **ê¸°ìˆ **: Spring Boot + WebFlux + Kotlin + MongoDB
- **ê¸°ëŠ¥**:
  - ëŒ“ê¸€ CRUD
  - ëŒ€ëŒ“ê¸€
  - ê³„ì¸µ êµ¬ì¡°
  - ë‹µê¸€ ì•Œë¦¼

#### 5. Auth Service
- **ê¸°ìˆ **: Spring Boot + WebFlux + Kotlin + Redis
- **ê¸°ëŠ¥**:
  - JWT í† í° ê´€ë¦¬
  - ì„¸ì…˜ ê´€ë¦¬
  - OAuth2 ì—°ë™
  - ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”

#### 6. Notification Service
- **ê¸°ìˆ **: Spring Boot + WebFlux + Kotlin + Kafka
- **ê¸°ëŠ¥**:
  - ì‹¤ì‹œê°„ ì•Œë¦¼
  - ì´ë©”ì¼ ë°œì†¡
  - í‘¸ì‹œ ì•Œë¦¼
  - ì´ë²¤íŠ¸ ì²˜ë¦¬

## ğŸ’¾ ë°ì´í„° ì•„í‚¤í…ì²˜

### ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ ì´ìœ 

#### MySQL (ê´€ê³„í˜• ë°ì´í„°)
- **ìš©ë„**: ì‚¬ìš©ì ì •ë³´, ê¶Œí•œ, ì‹œìŠ¤í…œ ì„¤ì •
- **ì´ìœ **: ACID íŠ¸ëœì­ì…˜, ì •í•©ì„±, ë³µì¡í•œ ê´€ê³„ ì²˜ë¦¬
- **í…Œì´ë¸”**: users, user_roles, permissions, system_settings

#### MongoDB (ë¬¸ì„œ ë°ì´í„°)
- **ìš©ë„**: ê²Œì‹œê¸€, ëŒ“ê¸€, íŒŒì¼ ì •ë³´
- **ì´ìœ **: ìœ ì—°í•œ ìŠ¤í‚¤ë§ˆ, ë¹ ë¥¸ ì½ê¸°, ê³„ì¸µ ë°ì´í„°
- **ì»¬ë ‰ì…˜**: posts, comments, attachments, tags

#### Redis (ì¸ë©”ëª¨ë¦¬ ë°ì´í„°)
- **ìš©ë„**: ì„¸ì…˜, ìºì‹œ, ì‹¤ì‹œê°„ ë°ì´í„°
- **ì´ìœ **: ë¹ ë¥¸ ì ‘ê·¼ ì†ë„, ë§Œë£Œ ê¸°ëŠ¥, Pub/Sub
- **ë°ì´í„°**: user_sessions, cache:posts, user:online

#### Kafka (ë©”ì‹œì§•)
- **ìš©ë„**: ì´ë²¤íŠ¸, ì•Œë¦¼, ë°ì´í„° ìŠ¤íŠ¸ë¦¬ë°
- **ì´ìœ **: ë†’ì€ ì²˜ë¦¬ëŸ‰, ë‚´ê³ ì¥ì„±, ìˆœì„œ ë³´ì¥
- **í† í”½**: notifications, events, user_activity

## ğŸŒ ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜

### ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬
- **ë°©ì‹**: Kubernetes Native Service Discovery
- **DNS**: `service-name.namespace.svc.cluster.local`
- **Load Balancing**: Kubernetes Service (ClusterIP)
- **Health Check**: Actuator Health Endpoints

### í†µì‹  íŒ¨í„´
```
Client â†’ Ingress â†’ API Gateway â†’ Service â†’ Database
                    â†“
            JWT Filter â†’ Rate Limiter â†’ Service Mesh
```

### ë³´ì•ˆ
- **ì¸ì¦**: JWT í† í° ê¸°ë°˜
- **ê¶Œí•œ**: Role-Based Access Control (RBAC)
- **ë„¤íŠ¸ì›Œí¬**: NetworkPolicyë¡œ ê²©ë¦¬
- **ë°ì´í„°**: Secretsë¡œ ë¯¼ê° ì •ë³´ ê´€ë¦¬

## ğŸ”„ ë°ì´í„° íë¦„

### ì‚¬ìš©ì ë“±ë¡
```
1. Client â†’ Frontend (Vue.js)
2. Frontend â†’ API Gateway (/api/auth/register)
3. Gateway â†’ Auth Service
4. Auth Service â†’ Redis (session)
5. Auth Service â†’ MySQL (user data)
6. Auth Service â†’ Kafka (user:registered event)
7. Kafka â†’ Notification Service
8. Notification Service â†’ Client (welcome email)
```

### ê²Œì‹œê¸€ ì‘ì„±
```
1. Client â†’ Frontend â†’ API Gateway (/api/posts)
2. Gateway â†’ Post Service â†’ MongoDB (post data)
3. Post Service â†’ Kafka (post:created event)
4. Kafka â†’ Notification Service â†’ Redis (follower cache)
5. Client â†’ Frontend â† Post Service (response)
```

## ğŸ“Š í™•ì¥ì„± ì„¤ê³„

### ìˆ˜í‰ í™•ì¥ (Horizontal Scaling)
- **Pod**: HPA (Horizontal Pod Autoscaler)
- **ì„œë¹„ìŠ¤**: Stateless ì„¤ê³„
- **ë°ì´í„°ë² ì´ìŠ¤**: Read Replica, Sharding

### ìˆ˜ì§ í™•ì¥ (Vertical Scaling)
- **ë¦¬ì†ŒìŠ¤**: Resource requests/limits
- **ì„±ëŠ¥**: JVM íŠœë‹, ìºì‹œ ì „ëµ
- **ìµœì í™”**: Connection Pooling, Indexing

### ë¬´ì¤‘ë‹¨ ë°°í¬
- **ì „ëµ**: Rolling Update
- **Health Check**: Readiness/Liveness Probes
- **ë¡¤ë°±**: Deployment Rollback
- **ë¸”ë£¨-ê·¸ë¦°/ì¹´ë‚˜ë¦¬**: ì„ íƒì  ì ìš©

## ğŸ” ëª¨ë‹ˆí„°ë§ ì•„í‚¤í…ì²˜

### 3ê°€ì§€ í•µì‹¬ ì§€í‘œ
1. **ë©”íŠ¸ë¦­**: ì‹œìŠ¤í…œ ì„±ëŠ¥, ë¹„ì¦ˆë‹ˆìŠ¤ ì§€í‘œ
2. **ë¡œê·¸**: ì´ë²¤íŠ¸, ì—ëŸ¬, ë””ë²„ê¹… ì •ë³´
3. **ì¶”ì **: ìš”ì²­ íë¦„, ì„œë¹„ìŠ¤ ê°„ í˜¸ì¶œ

### ìˆ˜ì§‘ ë„êµ¬
- **Metrics**: Prometheus + Grafana
- **Logging**: ELK Stack (Elasticsearch, Logstash, Kibana)
- **Tracing**: Jaeger, Zipkin
- **Health**: Spring Boot Actuator, Kubernetes Probes

## ğŸ›¡ï¸ ë³´ì•ˆ ì•„í‚¤í…ì²˜

### Defense in Depth
1. **ë„¤íŠ¸ì›Œí¬**: Ingress, NetworkPolicy, Firewall
2. **ì• í”Œë¦¬ì¼€ì´ì…˜**: JWT, RBAC, Input Validation
3. **ë°ì´í„°**: Encryption, Secrets, Backup
4. **ì¸í”„ë¼**: Container Security, Image Scanning

### ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€
- **ìµœì†Œ ê¶Œí•œ**: Service Accounts, RBAC
- **ì•”í˜¸í™”**: TLS, ë°ì´í„° ì•”í˜¸í™”
- **ê°ì‚¬**: ë¡œê¹…, ëª¨ë‹ˆí„°ë§
- **ì •ì±…**: Security Headers, CSP

ì´ ì•„í‚¤í…ì²˜ëŠ” ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œ ê²€ì¦ëœ íŒ¨í„´ì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ê° ê³„ì¸µì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë˜ì–´ ìˆì–´ ìœ ì§€ë³´ìˆ˜ì™€ í™•ì¥ì´ ìš©ì´í•©ë‹ˆë‹¤.